!function(b,e,v){"use strict";var i=b(e),s=e.Modernizr;s.addTest("csstransformspreserve3d",function(){var i,o=s.prefixed("transformStyle"),t="preserve-3d";return!!o&&(o=o.replace(/([A-Z])/g,function(t,i){return"-"+i.toLowerCase()}).replace(/^ms-/,"-ms-"),s.testStyles("#modernizr{"+o+":"+t+";}",function(t){i=e.getComputedStyle?getComputedStyle(t,null).getPropertyValue(o):""}),i===t)});var n,r,c=b.event;n=c.special.debouncedresize={setup:function(){b(this).on("resize",n.handler)},teardown:function(){b(this).off("resize",n.handler)},handler:function(t,i){var o=this,e=arguments,s=function(){t.type="debouncedresize",c.dispatch.apply(o,e)};r&&clearTimeout(r),i?s():r=setTimeout(s,n.threshold)},threshold:150},b.BookBlock=function(t,i){this.$el=b(i),this._init(t)},b.BookBlock.defaults={orientation:"vertical",direction:"ltr",speed:1e3,easing:"ease-in-out",shadows:!0,shadowSides:.2,shadowFlip:.1,circular:!0,nextEl:"",prevEl:"",autoplay:!1,interval:3e3,onEndFlip:function(){return!1},onBeforeFlip:function(){return!1}},b.BookBlock.prototype={_init:function(t){this.options=b.extend(!0,{},b.BookBlock.defaults,t),this.$el.addClass("bb-"+this.options.orientation),this.$items=this.$el.children(".bb-item").hide(),this.itemsCount=this.$items.length,this.current=0,this.previous=-1,this.$current=this.$items.eq(this.current).show(),this.elWidth=this.$el.width();var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=i[s.prefixed("transition")]+".bookblock",this.support=s.csstransitions&&s.csstransforms3d&&s.csstransformspreserve3d,this._initEvents(),this.options.autoplay&&(this.options.circular=!0,this._startSlideshow())},_initEvents:function(){var t=this;""!==this.options.nextEl&&b(this.options.nextEl).on("click.bookblock touchstart.bookblock",function(){return t._action("next"),!1}),""!==this.options.prevEl&&b(this.options.prevEl).on("click.bookblock touchstart.bookblock",function(){return t._action("prev"),!1}),i.on("debouncedresize",function(){t.elWidth=t.$el.width()})},_action:function(t,i,o){this._stopSlideshow(),this._navigate(t,i,o)},_navigate:function(t,i,o){if(this.isAnimating)return!1;this.options.onBeforeFlip(this.current),this.isAnimating=!0,this.$current=this.$items.eq(this.current),i!==v?this.current=i:"next"===t&&"ltr"===this.options.direction||"prev"===t&&"rtl"===this.options.direction?o?this.mouseIn=!0:(this.mouseIn=!1,this.previous=this.current,this.current=this.current<this.itemsCount-1?this.current+1:0):("prev"===t&&"ltr"===this.options.direction||"next"===t&&"rtl"===this.options.direction)&&(o?this.mouseIn=!0:(this.mouseIn=!1,this.previous=this.current,this.current=0<this.current?this.current-1:this.itemsCount-1)),this.$nextItem=!this.options.circular&&this.mouseIn?this.$current:this.$items.eq(this.current),this.support?this._layout(t):this._layoutNoSupport(t)},_layoutNoSupport:function(t){this.$items.hide(),this.$nextItem.show(),this.mouseIn=!1,this.isAnimating=!1;var i="next"===t&&this.current===this.itemsCount-1||"prev"===t&&0===this.current;this.options.onEndFlip(this.previous,this.current,i)},_layout:function(o){var e=this;e.$el.children(".bb-page").remove(),e.isAnimating=!1;var t=this._addSide("left",o),i=this._addSide("middle",o),s=this._addSide("right",o),n=t.find("div.bb-overlay"),r=i.find("div.bb-flipoverlay:first"),c=i.find("div.bb-flipoverlay:last"),a=s.find("div.bb-overlay"),h=this.mouseIn?400:this.options.speed;if(this.$items.hide(),this.$el.prepend(t,i,s),i.css({transitionDuration:h+"ms",transitionTimingFunction:this.options.easing}).on(this.transEndEventName,function(t){if(b(t.target).hasClass("bb-page")&&!e.mouseIn){e.$el.children(".bb-page").remove(),e.$nextItem.show(),e.mouseIn=!1,e.isAnimating=!1,e.isBlocked=!1;var i="next"===o&&e.current===e.itemsCount-1||"prev"===o&&0===e.current;e.options.onEndFlip(e.previous,e.current,i),e.mouseOut||e._action(o,v,!0)}}),"prev"===o&&i.addClass("bb-flip-initial"),this.options.shadows&&!this.mouseIn){var l="next"===o?{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"}:{transition:"opacity "+this.options.speed/2+"ms linear",opacity:this.options.shadowSides},u="next"===o?{transition:"opacity "+this.options.speed/2+"ms linear"}:{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms",opacity:this.options.shadowFlip},d="next"===o?{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms",opacity:this.options.shadowFlip}:{transition:"opacity "+this.options.speed/2+"ms linear"},p="next"===o?{transition:"opacity "+this.options.speed/2+"ms linear",opacity:this.options.shadowSides}:{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"};r.css(u),c.css(d),n.css(l),a.css(p)}setTimeout(function(){i.addClass(e.mouseIn?"bb-flip-"+o+"-end":"bb-flip-"+o),e.options.shadows&&!e.mouseIn&&(r.css({opacity:"next"===o?e.options.shadowFlip:0}),c.css({opacity:"next"===o?0:e.options.shadowFlip}),n.css({opacity:"next"===o?e.options.shadowSides:0}),a.css({opacity:"next"===o?0:e.options.shadowSides}))},25)},_addSide:function(t,i){var o;switch(t){case"left":o=b('<div class="bb-page"><div class="bb-back"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+("next"===i?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",102);break;case"middle":o=b('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+("next"===i?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-flipoverlay"></div></div></div><div class="bb-back"><div class="bb-outer"><div class="bb-content" style="width:'+this.elWidth+'px"><div class="bb-inner">'+("next"===i?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-flipoverlay"></div></div></div></div>').css("z-index",103);break;case"right":o=b('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+("next"===i?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",101)}return o},_startSlideshow:function(){var t=this;this.slideshow=setTimeout(function(){t._navigate("next"),t.options.autoplay&&t._startSlideshow()},this.options.interval)},_stopSlideshow:function(){this.options.autoplay&&(clearTimeout(this.slideshow),this.options.autoplay=!1)},resize:function(){this.elWidth=this.$el.width()},next:function(){this.isBlocked=!0,this._action("ltr"===this.options.direction?"next":"prev")},nextHover:function(){this.isBlocked||(this.mouseOut=!1,this._action("ltr"===this.options.direction?"next":"prev",v,!0))},prev:function(){this.isBlocked=!0,this._action("ltr"===this.options.direction?"prev":"next")},prevHover:function(){this.isBlocked||(this.mouseOut=!1,this._action("ltr"===this.options.direction?"prev":"next",v,!0))},hideHover:function(){this.mouseIn&&(this.$el.children(".bb-page").remove(),this.$nextItem.show(),this.mouseIn=!1,this.isAnimating=!1),this.mouseOut=!0},jump:function(t){if(this.hideHover(),(t-=1)===this.current||t>=this.itemsCount||t<0)return!1;var i;i="ltr"===this.options.direction?t>this.current?"next":"prev":t>this.current?"prev":"next",this._action(i,t)},last:function(){this.jump(this.itemsCount)},first:function(){this.jump(1)},isActive:function(){return this.isAnimating},update:function(){var t=this.$items.eq(this.current);this.$items=this.$el.children(".bb-item"),this.itemsCount=this.$items.length,this.current=t.index()},destroy:function(){this.options.autoplay&&this._stopSlideshow(),this.$el.removeClass("bb-"+this.options.orientation),this.$items.show(),""!==this.options.nextEl&&b(this.options.nextEl).off(".bookblock"),""!==this.options.prevEl&&b(this.options.prevEl).off(".bookblock"),i.off("debouncedresize")}};var a=function(t){e.console&&e.console.error(t)};b.fn.bookblock=function(i){if("string"==typeof i){var o=Array.prototype.slice.call(arguments,1);this.each(function(){var t=b.data(this,"bookblock");t?b.isFunction(t[i])&&"_"!==i.charAt(0)?t[i].apply(t,o):a("no such method '"+i+"' for bookblock instance"):a("cannot call methods on bookblock prior to initialization; attempted to call method '"+i+"'")})}else this.each(function(){var t=b.data(this,"bookblock");t?t._init():t=b.data(this,"bookblock",new b.BookBlock(i,this))});return this}}(jQuery,window);var nameHash=["L\u2019enthousiaste","Le sphinx","Le Seigneur des titres","L'encyclop\xe9dique","L\u2019analyste","Le juge","L\u2019\xe9crivain","L\u2019\xe9valuateur","Le bienveillant"],Page=function(){var o={$nav:$(".img-icons"),$bookBlock:$("#bb-bookblock"),$pageRight:$("#bb-right-page"),$navNext:$("#bb-nav-next"),$pageLeft:$("#bb-left-page"),$navPrev:$("#bb-nav-prev")},t=function(){o.$bookBlock.bookblock({speed:800,shadowSides:.8,shadowFlip:.7,onEndFlip:function(t,i){return o.$nav.removeClass("bb-current"),o.$nav.eq(i).addClass("bb-current"),$(".text",o.$navPrev).text(nameHash[0==i?8:i-1]),$(".text",o.$navNext).text(nameHash[(i+1)%9]),!1}}),i()},i=function(){var t=o.$bookBlock.children();o.$navPrev.on("click touchstart",function(){return o.$bookBlock.bookblock("prev"),!1}),o.$navPrev.on("mouseenter",function(){return o.$bookBlock.bookblock("prevHover"),!1}).on("mouseleave",function(){return o.$bookBlock.bookblock("hideHover"),!1}),o.$pageLeft.on("click touchstart",function(){return o.$bookBlock.bookblock("prev"),!1}),o.$pageLeft.on("mouseenter",function(){return o.$bookBlock.bookblock("prevHover"),!1}).on("mouseleave",function(){return o.$bookBlock.bookblock("hideHover"),!1}),o.$navNext.on("click touchstart",function(){return o.$bookBlock.bookblock("next"),!1}),o.$navNext.on("mouseenter",function(){return o.$bookBlock.bookblock("nextHover"),!1}).on("mouseleave",function(){return o.$bookBlock.bookblock("hideHover"),!1}),o.$pageRight.on("click touchstart",function(){return o.$bookBlock.bookblock("next"),!1}),o.$pageRight.on("mouseenter",function(){return o.$bookBlock.bookblock("nextHover"),!1}).on("mouseleave",function(){return o.$bookBlock.bookblock("hideHover"),!1}),o.$nav.each(function(t){$(this).on("click touchstart",function(){return o.$bookBlock.bookblock("jump",t+1),!1})}),t.on({swipeleft:function(){return o.$bookBlock.bookblock("next"),!1},swiperight:function(){return o.$bookBlock.bookblock("prev"),!1}}),$(document).keydown(function(t){var i={left:37,up:38,right:39,down:40};switch(t.keyCode||t.which){case i.left:o.$bookBlock.bookblock("prev");break;case i.right:o.$bookBlock.bookblock("next")}})};return{init:t}}();Page.init(),$("#bb-zoom-in").on("click touchstart",function(){return $("#comics").toggleClass("col-md-offset-1 col-md-10 col-lg-offset-2 col-lg-8"),$(".glyphicon",this).toggleClass("glyphicon-zoom-in"),$(".glyphicon",this).toggleClass("glyphicon-zoom-out"),$("#bb-bookblock").delay(100).bookblock("resize"),!1});